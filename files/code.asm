IN

PUSH 0                 #VARIABLE n ASSIGMENT
PUSHR SR2
PUSH 5
MUL
ADD
POPR SR1
POPM [SR1]
PUSHM [SR1]

PUSH 2

PUSH 1                 #VARIABLE i ASSIGMENT
PUSHR SR2
PUSH 5
MUL
ADD
POPR SR1
POPM [SR1]
PUSHM [SR1]

PUSH 0

PUSH 4                 #VARIABLE answer ASSIGMENT
PUSHR SR2
PUSH 5
MUL
ADD
POPR SR1
POPM [SR1]
PUSHM [SR1]

LABEL 0

PUSH 1                 #VARIABLE i
PUSHR SR2
PUSH 5
MUL
ADD
POPR SR1
PUSHM [SR1]


PUSH 0                 #VARIABLE n
PUSHR SR2
PUSH 5
MUL
ADD
POPR SR1
PUSHM [SR1]

CALL 0_SMALLER
PUSH 0
JE 1

PUSH 1                 #VARIABLE i
PUSHR SR2
PUSH 5
MUL
ADD
POPR SR1
PUSHM [SR1]

PUSHR SR2
PUSH 1
ADD
POPR SR2
CALL prime
PUSH 0
JE 2

PUSH 4                 #VARIABLE answer
PUSHR SR2
PUSH 5
MUL
ADD
POPR SR1
PUSHM [SR1]

PUSH 1
ADD

PUSH 4                 #VARIABLE answer ASSIGMENT
PUSHR SR2
PUSH 5
MUL
ADD
POPR SR1
POPM [SR1]
PUSHM [SR1]

LABEL 2

PUSH 1                 #VARIABLE i
PUSHR SR2
PUSH 5
MUL
ADD
POPR SR1
PUSHM [SR1]

PUSH 1
ADD

PUSH 1                 #VARIABLE i ASSIGMENT
PUSHR SR2
PUSH 5
MUL
ADD
POPR SR1
POPM [SR1]
PUSHM [SR1]

JMP 0
LABEL 1

PUSH 4                 #VARIABLE answer
PUSHR SR2
PUSH 5
MUL
ADD
POPR SR1
PUSHM [SR1]

OUT
HLT                          #END OF MAIN PROG

LABEL 0_EQUAL                #EQUAL CALL
JE 0_EQUAL_TRUE
PUSH 0
RET
LABEL 0_EQUAL_TRUE
PUSH 1
RET

LABEL 0_NEQUAL               #NEQUAL CALL
JNE 0_NEQUAL_TRUE
PUSH 0
RET
LABEL 0_NEQUAL_TRUE
PUSH 1
RET

LABEL 0_SMALLER              #SMALLER CALL
JB 0_SMALLER_TRUE
PUSH 0
RET
LABEL 0_SMALLER_TRUE
PUSH 1
RET

LABEL 0_BIGGER               #BIGGER CALL
JA 0_BIGGER_TRUE
PUSH 0
RET
LABEL 0_BIGGER_TRUE
PUSH 1
RET

LABEL prime                     #FUNCTION prime BODY

PUSH 0                 #VARIABLE n AS ARGUMENT
PUSHR SR2
PUSH 5
MUL
ADD
POPR SR1
POPM [SR1]

PUSH 2

PUSH 1                 #VARIABLE i ASSIGMENT
PUSHR SR2
PUSH 5
MUL
ADD
POPR SR1
POPM [SR1]
PUSHM [SR1]

LABEL 3

PUSH 1                 #VARIABLE i
PUSHR SR2
PUSH 5
MUL
ADD
POPR SR1
PUSHM [SR1]


PUSH 1                 #VARIABLE i
PUSHR SR2
PUSH 5
MUL
ADD
POPR SR1
PUSHM [SR1]

MUL

PUSH 0                 #VARIABLE n
PUSHR SR2
PUSH 5
MUL
ADD
POPR SR1
PUSHM [SR1]

PUSH 1
ADD
CALL 0_SMALLER
PUSH 0
JE 4

PUSH 1                 #VARIABLE i
PUSHR SR2
PUSH 5
MUL
ADD
POPR SR1
PUSHM [SR1]


PUSH 0                 #VARIABLE n
PUSHR SR2
PUSH 5
MUL
ADD
POPR SR1
PUSHM [SR1]

PUSHR SR2
PUSH 1
ADD
POPR SR2
CALL dels
PUSH 0
JE 5
PUSH 0
PUSHR SR2
PUSH 1
SUB
POPR SR2
RET
LABEL 5

PUSH 1                 #VARIABLE i
PUSHR SR2
PUSH 5
MUL
ADD
POPR SR1
PUSHM [SR1]

PUSH 1
ADD

PUSH 1                 #VARIABLE i ASSIGMENT
PUSHR SR2
PUSH 5
MUL
ADD
POPR SR1
POPM [SR1]
PUSHM [SR1]

JMP 3
LABEL 4
PUSH 1
PUSHR SR2
PUSH 1
SUB
POPR SR2
RET
PUSHR SR2                # DECREASING RECURSION DEPTH 
PUSH 1
SUB
POPR SR2
RET
LABEL dels                     #FUNCTION dels BODY

PUSH 2                 #VARIABLE x AS ARGUMENT
PUSHR SR2
PUSH 5
MUL
ADD
POPR SR1
POPM [SR1]


PUSH 3                 #VARIABLE y AS ARGUMENT
PUSHR SR2
PUSH 5
MUL
ADD
POPR SR1
POPM [SR1]


PUSH 2                 #VARIABLE x
PUSHR SR2
PUSH 5
MUL
ADD
POPR SR1
PUSHM [SR1]


PUSH 3                 #VARIABLE y
PUSHR SR2
PUSH 5
MUL
ADD
POPR SR1
PUSHM [SR1]

DIV

PUSH 3                 #VARIABLE y
PUSHR SR2
PUSH 5
MUL
ADD
POPR SR1
PUSHM [SR1]

MUL

PUSH 2                 #VARIABLE x
PUSHR SR2
PUSH 5
MUL
ADD
POPR SR1
PUSHM [SR1]

CALL 0_EQUAL
PUSH 0
JE 6
PUSH 1
PUSHR SR2
PUSH 1
SUB
POPR SR2
RET
LABEL 6
PUSH 0
PUSHR SR2
PUSH 1
SUB
POPR SR2
RET
PUSHR SR2                # DECREASING RECURSION DEPTH 
PUSH 1
SUB
POPR SR2
RET
